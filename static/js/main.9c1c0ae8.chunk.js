(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{240:function(e,t,n){e.exports=n(516)},259:function(e,t){},261:function(e,t){},277:function(e,t){},279:function(e,t){},443:function(e,t){},515:function(e,t,n){},516:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),i=n(237),s=n.n(i),r=n(519),c=n(21),l=n(22),u=n(24),h=n(23),d=n(25),m=n(74),b="https://s3.amazonaws.com/onename/avatar-placeholder.png",f=(o.Component,n(149)),k=(a.a.Component,function(e){function t(e){var o;Object(c.a)(this,t),o=Object(u.a)(this,Object(h.a)(t).call(this,e));var a=n(236);return o.state={tick:0,brightness:0,soliloquyRB:new a(6)},o}return Object(d.a)(t,e),Object(l.a)(t,[{key:"tick",value:function(){var e=this.state.tick,t=this.state.soliloquyRB;1===e?t.enq("Eyes are tired."):3===e?t.enq("Screen is dim."):7===e&&t.enq("Can't see."),this.setState({tick:e,soliloquyRB:t})}},{key:"render",value:function(){var e=this.props.handleSignIn;this.state.soliloquyRB;return a.a.createElement("div",null,a.a.createElement("div",{className:"signintop"}),a.a.createElement("div",{className:"signin"},a.a.createElement("button",{className:"btn btn-sm",id:"signin-button",onClick:e.bind(this)},"Sign In with Blockstack")))}}]),t}(o.Component)),p=n(97),y=n(239);function g(e){return a.a.createElement("button",{type:"button",className:"action",hidden:e.hidden,disabled:e.disabled,onClick:e.onClick},e.actionText)}var v=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).createTable=function(){if(n.props.show){n.props.state;return[]}},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("table",null,this.createTable()))}}]),t}(a.a.Component),q=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).createTable=function(){for(var e=[],t=n.props.transitions,o=function(o){var i=[];i.push(a.a.createElement("td",null,a.a.createElement(g,{actionText:t[o],onClick:function(){return n.props.onTransition(t[o])},hidden:n.props.hidden[t[o]]?"true":"",disabled:n.props.disabled[t[o]]?"true":""}))),e.push(a.a.createElement("tr",null,i))},i=0;i<t.length;i++)o(i);return e},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("table",null,this.createTable()))}}]),t}(a.a.Component),w=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).createTable=function(){for(var e=[],t=n.props.soliloquyRB.peekN(n.props.soliloquyRB.size()),o=n.props.soliloquyRB.size()-1;o>=0;o--){var i=[];i.push(a.a.createElement("td",null,"".concat(t[o]))),e.push(a.a.createElement("tr",null,i))}return e},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("table",null,this.createTable())}}]),t}(a.a.Component),S=function(e){function t(e){var o;Object(c.a)(this,t),o=Object(u.a)(this,Object(h.a)(t).call(this,e));var a=n(236),i=n(513);return o.state={tick:0,workEndTick:0,brightnessTick:0,brightness:30,dimRate:-.3,soliloquyRB:new a(6),hidden:{team:!0,"a simple search engine":!0,"a humble book store":!0,"a tiny social network":!0,"monetize users":!0,contribute:!0},disabled:{},engineers:{frontend:0,backend:0,optimization:0},contributors:0,loan:{amount:0,interestPct:30},lastState:"home",saveEnabled:!1,contributeEndTick:0,codeXP:0,money:0,users:0,adoptionRate:1,tippingPoint:!1,worked:!1,gameData:0,fsm:new i({init:"home",transitions:[{name:"a quiet room",from:"home",to:"quiet"},{name:"inventory",from:"home",to:"inventory"},{name:"work",from:"home",to:"work"},{name:"contribute",from:"home",to:"contribute"},{name:"team",from:"home",to:"team"},{name:"code a simple search engine",from:"work",to:"work"},{name:"a simple search engine",from:"work",to:"search"},{name:"a humble book store",from:"work",to:"book"},{name:"a tiny social network",from:"work",to:"social"},{name:"code for some BS temp job",from:"work",to:"bs"},{name:"back",from:["quiet","inventory","work","search","book","social","team","bs","contribute"],to:"home"},{name:"brighten",from:"home",to:"home"},{name:"code",from:"quiet",to:"quiet"},{name:"blockstack",from:"contribute",to:"contribute"},{name:"ethereum",from:"contribute",to:"contribute"},{name:"bitcoin",from:"contribute",to:"contribute"},{name:"fix legacy code",from:"bs",to:function(){return o.handleBSWork(),"bs"}},{name:"write more lolcode",from:"bs",to:function(){return o.handleBSWork(),"bs"}},{name:"compile",from:"bs",to:function(){return o.handleBSWork(),"bs"}},{name:"add another layer of abstraction",from:"bs",to:function(){return o.handleBSWork(),"bs"}},{name:"hire a frontend engineer",from:"team",to:"team"},{name:"hire a backend engineer",from:"team",to:"team"},{name:"hire an optimization engineer",from:"team",to:"team"},{name:"create a simple, modern frontend",from:"search",to:"search"},{name:"create a robust backend",from:"search",to:"search"},{name:"optimization!",from:"search",to:"search"},{name:"monetize users",from:"search",to:"search"}],methods:{onBrighten:function(){return o.handleBrightness(20)},onCode:function(){return o.handleCode()},onEnterInventory:function(){return o.handleInventory()},"onHire a frontend engineer":function(){return o.handleHire("frontend")},"onHire a backend engineer":function(){return o.handleHire("backend")},"onHire an optimization engineer":function(){return o.handleHire("optimization")},"onCode a simple search engine":function(){return o.handleWork("search")},"onCode a humble book store":function(){return o.handleWork("book")},"onCode a tiny social network":function(){return o.handleWork("social")},"onCreate a simple, modern frontend":function(){return o.handleSearchWork("frontend")},"onCreate a robust backend":function(){return o.handleSearchWork("backend")},"onOptimization!":function(){return o.handleSearchWork("optimization")},"onMonetize users":function(){return o.handleMonetization()},onBlockstack:function(){return o.handleContribute("blockstack")},onEthereum:function(){return o.handleContribute("ethereum")},onBitcoin:function(){return o.handleContribute("bitcoin")}}})},o.tick=o.tick.bind(Object(p.a)(o)),o.intervalHandle=setInterval(o.tick,1e3),console.log("SAVED BASE STATE"),o.baseState=o.state,o}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleContribute",value:function(e){var t=this.state.codeXP,n=this.state.soliloquyRB,o=this.state.contributors,a=this.state.dimRate,i=this.state.contributeEndTick,s=this.state.tick,r=this.state.disabled;switch(e){case"blockstack":t>=500?(r[e]=!0,t-=500,n.enq("*really bad game on Blockstack goes viral*"),o+=50):(n.enq("Not enough code..."),n.enq("Need "+(500-t)+" LOC."));break;case"ethereum":t>=5e3?(r[e]=!0,t-=5e3,n.enq("VB: Thanks for everything you\u2019ve done, dad."),o+=1e3):(n.enq("Not enough code..."),n.enq("Need "+(5e3-t)+" LOC."));break;case"bitcoin":t>=5e4?(r[e]=!0,t-=5e4,o+=1e4,i=s):(n.enq("Not enough code..."),n.enq("Need "+(5e4-t)+" LOC."))}this.setState({soliloquyRB:n,codeXP:t,contributors:o,dimRate:a,contributeEndTick:i,disabled:r})}},{key:"handleBSWork",value:function(){var e=this.state.codeXP,t=this.state.money,n=this.state.soliloquyRB,o=this.state.worked;e>=10?(o=!0,t+=5,e-=10,n.enq("Unfulfilling work done. Got $5")):(n.enq("Not enough code..."),n.enq("Need "+(10-e)+" LOC.")),this.setState({codeXP:e,money:t,soliloquyRB:n,worked:o})}},{key:"handleMonetization",value:function(){var e=this.state.money,t=5*this.state.users,n=this.state.adoptionRate;console.log("Got money for having users: "+t),e+=t,this.setState({money:e,adoptionRate:n-10})}},{key:"handleHire",value:function(e){var t=this.state.soliloquyRB,n=this.state.money,o=this.state.engineers;if(n>=100)switch(e){case"frontend":t.enq("Frontend Engineer hired at rate of $108/hr!"),o[e]+=1;break;case"backend":t.enq("Backend Engineer hired at rate of $108/hr!"),o[e]+=1;break;case"optimization":t.enq("Optimization Engineer hired at rate of $108/hr!"),o[e]+=1;break;default:t.enq("Not hiring at the moment!")}else t.enq("Too poor to hire. Need $"+(100-n)+". Consider a temp job.");this.setState({soliloquyRB:t,engineers:o,money:n})}},{key:"handleSearchWork",value:function(e){var t=this.state.engineers[e],n=this.state.money,o=this.state.optimizationLevel,a=this.state.soliloquyRB,i=this.state.disabled;if(t>=1)switch(e){case"backend":i["create a robust backend"]=!0,a.enq("This thing is built like a tank, ready for war. Now how are we going to pay for all this...?");break;case"frontend":i["create a simple, modern frontend"]=!0,a.enq("NOICE. A simple, modern frontend has been built. Soon we'll need a marketing team...");break;case"optimization":n>=-10?(a.enq("$: -10"),a.enq("Throw money and an engineer at the problem. That'll fix it."),n+=-10,o+=1):a.enq("Need more money! $"+(-10-n)+" to be exact.");break;default:a.enq("Oops. There's no work for the "+e+" position...")}else a.enq("Need "+(1-t)+" "+e+" engineers on your team!");this.setState({disabled:i,soliloquyRB:a,money:n,optimizationLevel:o})}},{key:"tick",value:function(){var e=this.state.soliloquyRB,t=this.state.tick,n=this.state.workEndTick,o=this.state.money,a=this.state.users,i=this.state.brightness,s=this.state.dimRate,r=this.state.adoptionRate,c=this.state.tippingPoint,l=this.state.disabled,u=this.state.engineers,h=this.state.loan,d=this.state.hidden,m=this.state.contributors,b=this.state.codeXP,f=this.state.contributeEndTick,k=this.state.saveEnabled;if(1===t?e.enq("Eyes are tired."):3===t?e.enq("Screen is dim."):7===t?e.enq("Can't see."):2===t&&(k=!0),m>0&&(b+=m,f>0&&(l.brighten=!0,t===f+2?e.enq("SN: I'm not in this for the glory...son."):t===f+5?e.enq("SN: I'm here to make a difference."):t===f+10?(e.enq("SN: My eyes are tired now, and I must rest..."),s+=-3):t===f+13&&e.enq("*"+m+" contributors continue BUIDLing*"))),u in window)for(var p=0,g=Object.entries(u);p<g.length;p++){var v=g[p],q=Object(y.a)(v,2),w=q[0],S=q[1];0!==S&&(o>-.3?o+=-.3*S:c?o=0:(h.amount+=1e3,e.enq("Ran out of money."),e.enq("Took a loan for "+h.amount+" @ "+h.interestPct+"% to make payroll for "+w+"...will pay interest."),e.enq("Need to start making money...the pressure is immense!"),o+=h.amount))}h.amount>0&&(o-=h.amount*h.interestPct/100/2080);this.state.engineers.frontend>3&&(a+=r,r+=1),1===a&&(alert("Got our first user! Time to monetize on them..."),delete d["monetize users"]),a>1e3&&(c||e.enq("Reached the tipping point for number of users! We can't fail now."),c=!0),c&&(r-=.5,a<=0&&(a=0),o<=0&&0===n&&(n=t,l.brighten=!0),t===n+3?e.enq("Can\u2019t pay employees..."):t===n+5?e.enq("...the bank owns everything."):t===n+7?e.enq("Won't give us any more money."):t===n+10?e.enq("Lost the trust of the users."):t===n+13?e.enq("Took advantage of them."):t===n+16&&(e.enq("Can\u2019t even afford my electricity bill..."),s+=-3)),(i+=s)<=0&&(i=0),this.setState({tick:this.state.tick+1,workEndTick:n,brightnessTick:this.state.brightnessTick+1,dimRate:s,brightness:i,users:a,adoptionRate:r,tippingPoint:c,money:o,codeXP:b,saveEnabled:k})}},{key:"handleInventory",value:function(){var e=this.state.soliloquyRB;(this.state.users>0||this.state.tippingPoint)&&e.enq("users: "+this.state.users),e.enq("lines of code: "+this.state.codeXP),e.enq("$: "+this.state.money),this.setState({soliloquyRB:e})}},{key:"handleBookstore",value:function(){}},{key:"handleSocialNetwork",value:function(){}},{key:"handleWork",value:function(e){var t=this.state.soliloquyRB,n=this.state.codeXP,o=this.state.money,a=this.state.hidden,i=this.state.worked;if(this.state.codeXP>=30){switch(i=!0,e){case"book":t.enq("All things start from humble beginnings. Bookstore built!"),delete a["a humble book store"],a["code a humble book store"]=!0;break;case"social":t.enq("Have we reached the tipping point yet? Tiny social network built!"),delete a["a tiny social network"],a["code a tiny social network"]=!0;break;case"search":t.enq("Simplicity at its finest. The `query` function. Simple search engine built!"),delete a["a simple search engine"],a["code a simple search engine"]=!0;break;default:t.enq(e+" built!")}t.enq("...can we make it better?"),t.enq("Got $5"),n-=5,o+=5,delete a.team}else t.enq("Not enough code..."),t.enq("Need "+(30-n)+" LOC.");this.setState({codeXP:n,money:o,soliloquyRB:t,hidden:a,worked:i})}},{key:"handleSimpleSearchEngine",value:function(e){var t=this.state.soliloquyRB,n=this.state.codeXP,o=this.state.money,a=this.state.hidden;console.log("handleSimpleSearchEngine!"),this.state.codeXP>=30?(t.enq(e+" built!"),t.enq("$: +5"),t.enq("...can we make it better?"),n-=5,o+=5,delete a.team,delete a["a simple search engine"],a["code a simple search engine"]=!0):(t.enq("Not enough code..."),t.enq("Need "+(30-n)+" LOC.")),this.setState({codeXP:n,money:o,soliloquyRB:t,hidden:a})}},{key:"handleCode",value:function(){var e=this.state.soliloquyRB,t=this.state.worked,n=this.state.codeXP,o=this.state.contributors,a=100*(o+1),i=this.state.hidden;n+=5;e.enq("lines of code: +5"),!t&&n>=a&&(o>0?(o+=1,e.enq("Another contributor joins the team")):(o+=1,i.work=!0,delete i.contribute,alert("A contributor joins the team!"))),this.setState({codeXP:n,soliloquyRB:e,contributors:o})}},{key:"handleTransition",value:function(e){"function"===typeof this.state.fsm["".concat(e)]?this.state.fsm["".concat(e)]():console.log("function '"+e+"' is invalid!")}},{key:"saveGame",value:function(){var e=this.props.userSession;this.setState({lastState:this.state.fsm.state});var t=this.state,n=this.state.fsm;delete t.fsm,console.log("Writing gameData: "+JSON.stringify(t)),e.putFile("a-dark-room.json",JSON.stringify(t)),this.setState({fsm:n})}},{key:"restoreGame",value:function(){var e=this,t=this.props.userSession;console.log("Reading gameData..."),t.getFile("a-dark-room.json").then(function(t){var n=JSON.parse(t||"[]");console.log("Restore: "+t),delete n.soliloquyRB,e.setState(n)}).finally(function(){console.log("Done restoring")})}},{key:"resetGame",value:function(){this.setState(this.baseState)}},{key:"componentDidMount",value:function(){this.restoreGame()}},{key:"handleBrightness",value:function(e){var t=this.state.brightness,n=this.state.soliloquyRB,o=this.state.brightnessTick,a=this.state.saveEnabled;t+e<=0?t=0:o>=3&&(a&&(this.saveGame(),n.enq("game saved.")),t+=e,o=0),this.setState({brightness:t,brightnessTick:o,soliloquyRB:n})}},{key:"render",value:function(){var e=this,t=this.state.soliloquyRB;return a.a.createElement("div",{className:"game-area"},a.a.createElement("div",{className:"game"},a.a.createElement("button",{className:"btn btn-sm",id:"signout-button",onClick:this.props.handleSignOut.bind(this)},"logout"),a.a.createElement("button",{className:"btn btn-sm",id:"signout-button",onClick:function(){return e.resetGame()}},"reset")),a.a.createElement("div",{className:"actions"},a.a.createElement(q,{transitions:this.state.fsm.transitions(),hidden:this.state.hidden,disabled:this.state.disabled,onTransition:function(t){return e.handleTransition(t)}}),a.a.createElement(v,{show:"inventory"===this.state.fsm.state,data:this.state})),a.a.createElement("div",{className:"soliloquy"},a.a.createElement(f.Helmet,null,a.a.createElement("style",null,"\n                            :root {\n                                --primary-lightness: ".concat(this.state.brightness,"%;\n                                }\n                            "))),a.a.createElement(w,{soliloquyRB:t})))}}]),t}(o.Component),E=new m.AppConfig,O=new m.UserSession({appConfig:E}),B=function(e){function t(e){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).call(this,e))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleSignIn",value:function(e){e.preventDefault(),O.redirectToSignIn()}},{key:"handleSignOut",value:function(e){e.preventDefault(),O.signUserOut(window.location.origin)}},{key:"render",value:function(){return a.a.createElement("div",{className:"site-wrapper"},a.a.createElement("div",{className:"site-wrapper-inner"},O.isUserSignedIn()?a.a.createElement(S,{userSession:O,handleSignOut:this.handleSignOut}):a.a.createElement(k,{userSession:O,handleSignIn:this.handleSignIn})))}},{key:"componentDidMount",value:function(){var e=this;O.isSignInPending()&&O.handlePendingSignIn().then(function(t){window.history.replaceState({},document.title,"/"),e.setState({userData:t})})}}]),t}(o.Component);n(514),n(515);s.a.render(a.a.createElement(r.a,null,a.a.createElement(B,null)),document.getElementById("root"))}},[[240,1,2]]]);
//# sourceMappingURL=main.9c1c0ae8.chunk.js.map